<span style='color: #0000FF;'>&#60;</span><span style='color: #0000FF;'>?</span><span style='color: #000099;'><b>php</b></span><br/><span style='color: #0099CC;'>/**</span><br/><span style='color: #0099CC;'>&#160;*&#160;generator.php</span><br/><span style='color: #0099CC;'>*/</span><br/><span style='color: #000099;'><b>require_once</b></span>&#160;<span style='color: #008800;'>&#39;PLib.php&#39;</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/>PLib<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Import<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;Graphics.GText&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>PLib<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Import<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;DB.Database&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/><span style='color: #990000;'><b>$db</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;DB<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Create<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;mysql://user:password@host/db&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>Connect<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/>GTextDB<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Initialize<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$db</b></span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/><span style='color: #990000;'><b>$gtext</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: #000099;'><b>new</b></span>&#160;GTextDB<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;myfont.ttf&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/><span style='color: #990000;'><b>$gtext</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>fontsize&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: purple;'>18</span><span style='color: #0000FF;'>;</span><br/><span style='color: #990000;'><b>$gtext</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>fgcolor&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: #008800;'>&#34;900&#34;</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/><span style='color: #990000;'><b>$myText</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: #008800;'>&#39;This&#160;is&#160;a&#160;header&#39;</span><span style='color: #0000FF;'>;</span><br/><span style='color: #990000;'><b>$img</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: #990000;'><b>$gtext</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>Render<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$myText</b></span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/><span style='color: #000099;'><b>echo</b></span>&#160;<br/><span style='color: #008800;'>&#34;&#60;img&#160;src=&#39;/internal/{$img[&#39;url&#39;]}&#39;&#160;width=&#39;{$img[&#39;width&#39;]}&#39;</span><br/><span style='color: #008800;'>&#160;&#160;&#160;&#160;&#160;&#160;height=&#39;{$img[&#39;height&#39;]}&#39;&#160;alt=&#39;&#34;</span>&#160;<span style='color: #0000FF;'>.</span>&#160;<span style='color: #ff0000;'>htmlentities</span><span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$myText</b></span><span style='color: #0000FF;'>)</span>&#160;<span style='color: #0000FF;'>.</span>&#160;<span style='color: #008800;'>&#34;&#39;/&#62;&#34;</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;&#160;&#160;&#160;&#160;<br/><span style='color: #0099CC;'>/**</span><br/><span style='color: #0099CC;'>&#160;*&#160;Next&#160;we&#160;need&#160;a&#160;.htaccess&#160;file&#160;to&#160;redirect&#160;all&#160;image&#160;paths&#160;pointing&#160;to</span><br/><span style='color: #0099CC;'>&#160;*&#160;/internal/gtext-*&#160;to&#160;the&#160;PHP&#160;file&#160;below.</span><br/><span style='color: #0099CC;'>&#160;*</span><br/><span style='color: #0099CC;'>&#160;*&#160;First&#160;the&#160;.htaccess</span><br/><span style='color: #0099CC;'>*/</span><br/><span style='color: #0000FF;'>?</span><span style='color: #0000FF;'>&#62;</span><br/><span style='color: #0000FF;'>&#60;</span>IfModule&#160;mod_rewrite<span style='color: #0000FF;'>.</span>c<span style='color: #0000FF;'>&#62;</span><br/>&#160;&#160;RewriteEngine&#160;on<br/>&#160;<br/>&#160;&#160;<span style='color: #0099CC;'>#&#160;Modify&#160;the&#160;RewriteBase&#160;if&#160;you&#160;are&#160;using&#160;Drupal&#160;in&#160;a&#160;subdirectory&#160;and</span><br/>&#160;&#160;<span style='color: #0099CC;'>#&#160;the&#160;rewrite&#160;rules&#160;are&#160;not&#160;working&#160;properly.</span><br/>&#160;&#160;RewriteBase&#160;<span style='color: #0000FF;'>/</span><br/>&#160;<br/>&#160;&#160;<span style='color: #0099CC;'>#&#160;Handle&#160;gtext&#160;images</span><br/>&#160;&#160;RewriteRule&#160;^internal<span style='color: #0000FF;'>/</span><span style='color: #0000FF;'>(</span>gtext<span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>.</span><span style='color: #0000FF;'>*</span><span style='color: #0000FF;'>)</span><span style='color: #990000;'><b>$</b></span>&#160;image<span style='color: #0000FF;'>.</span><span style='color: #000099;'><b>php</b></span><span style='color: #0000FF;'>?</span>path<span style='color: #0000FF;'>=</span><span style='color: #990000;'><b>$1</b></span>&#160;<span style='color: #0000FF;'>[</span>L<span style='color: #0000FF;'>]</span><br/>&#160;<br/><span style='color: #0000FF;'>&#60;</span><span style='color: #0000FF;'>/</span>IfModule<span style='color: #0000FF;'>&#62;</span><br/><span style='color: #0000FF;'>&#60;</span><span style='color: #0000FF;'>?</span><span style='color: #000099;'><b>php</b></span><br/><span style='color: #0099CC;'>/**</span><br/><span style='color: #0099CC;'>&#160;*&#160;Then&#160;put&#160;the&#160;following&#160;in&#160;image.php</span><br/><span style='color: #0099CC;'>*/</span><br/><span style='color: #000099;'><b>require_once</b></span>&#160;<span style='color: #008800;'>&#39;PLib.php&#39;</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/>PLib<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Import<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;Graphics.GText&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>PLib<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Import<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;DB.Database&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/><span style='color: #990000;'><b>$db</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;DB<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Create<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;mysql://user:password@host/db&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>Connect<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>GTextDB<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Initialize<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$db</b></span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/><span style='color: #000099;'><b>if</b></span>&#160;<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>!</span><span style='color: #000099;'><b>isset</b></span><span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$_GET</b></span><span style='color: #0000FF;'>[</span><span style='color: #008800;'>&#39;path&#39;</span><span style='color: #0000FF;'>]</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>)</span>&#160;<span style='color: #0000FF;'>{</span><br/>&#160;&#160;<span style='color: #ff0000;'>header</span><span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#34;HTTP/1.1&#160;404&#160;File&#160;not&#160;found&#34;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;<span style='color: #000099;'><b>die</b></span><span style='color: #0000FF;'>;</span><br/><span style='color: #0000FF;'>}</span>&#160;&#160;<br/>&#160;<br/><span style='color: #990000;'><b>$img</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;GTextDB<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Get<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$_GET</b></span><span style='color: #0000FF;'>[</span><span style='color: #008800;'>&#39;path&#39;</span><span style='color: #0000FF;'>]</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/><span style='color: #000099;'><b>if</b></span>&#160;<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>!</span><span style='color: #990000;'><b>$img</b></span><span style='color: #0000FF;'>)</span>&#160;<span style='color: #0000FF;'>{</span><br/>&#160;&#160;<span style='color: #ff0000;'>header</span><span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#34;HTTP/1.1&#160;404&#160;File&#160;not&#160;found&#34;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;<span style='color: #000099;'><b>die</b></span><span style='color: #0000FF;'>;</span><br/><span style='color: #0000FF;'>}</span><br/>&#160;<br/><span style='color: #ff0000;'>header</span><span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#34;Content-Type:&#160;&#34;</span>&#160;<span style='color: #0000FF;'>.</span>&#160;<span style='color: #990000;'><b>$img</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>mimetype<span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/><span style='color: #000099;'><b>echo</b></span>&#160;<span style='color: #990000;'><b>$img</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>data<span style='color: #0000FF;'>;</span><br/><span style='color: #0000FF;'>?</span><span style='color: #0000FF;'>&#62;</span><br/>