<span style='color: #0000FF;'>&#60;</span><span style='color: #0000FF;'>?</span><span style='color: #000099;'><b>php</b></span><br/><span style='color: #0099CC;'>/**</span><br/><span style='color: #0099CC;'>&#160;*&#160;RSSWriter&#160;example.&#160;Howto&#160;create&#160;an&#160;RSS&#160;feed.</span><br/><span style='color: #0099CC;'>&#160;*</span><br/><span style='color: #0099CC;'>&#160;*&#160;@author&#160;Pontus&#160;Östlund&#160;&#60;spam@poppa.se&#62;</span><br/><span style='color: #0099CC;'>*/</span><br/><span style='color: #000099;'><b>require_once</b></span>&#160;<span style='color: #008800;'>&#39;PLib.php&#39;</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/>PLib<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Import<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;DB.Database&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>PLib<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Import<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;Web.Feed&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/><span style='color: #000099;'><b>try</b></span>&#160;<span style='color: #0000FF;'>{</span><br/>&#160;&#160;<span style='color: #990000;'><b>$db</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;DB<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Create<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;mysql://uname:pword@host/db&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>Connect<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;<br/>&#160;&#160;<span style='color: #990000;'><b>$mysite</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: #008800;'>&#39;http://mysite.com/blog&#39;</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/>&#160;&#160;<span style='color: #990000;'><b>$feed</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;RssFeed<span style='color: #0000FF;'>:</span><span style='color: #0000FF;'>:</span>Create<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;<br/>&#160;&#160;<span style='color: #990000;'><b>$channel</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: #000099;'><b>new</b></span>&#160;RSSChannel<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;<span style='color: #990000;'><b>$channel</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>SetTitle<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;Latest&#160;blog&#160;posts&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;<span style='color: #990000;'><b>$channel</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>SetLink<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$mysite</b></span>&#160;<span style='color: #0000FF;'>.</span>&#160;<span style='color: #008800;'>&#39;/&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;<span style='color: #990000;'><b>$channel</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>SetDescription<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;Latest&#160;blog&#160;posts&#160;from&#160;my&#160;fantastic&#160;site&#39;</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;<span style='color: #990000;'><b>$channel</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>Set<span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#39;image&#39;</span><span style='color: #0000FF;'>,</span>&#160;<span style='color: #000099;'><b>array</b></span><span style='color: #0000FF;'>(</span><br/>&#160;&#160;&#160;&#160;<span style='color: #008800;'>&#39;url&#39;</span>&#160;&#160;&#160;&#160;<span style='color: #0000FF;'>=</span><span style='color: #0000FF;'>&#62;</span>&#160;<span style='color: #990000;'><b>$mysite</b></span>&#160;<span style='color: #0000FF;'>.</span>&#160;<span style='color: #008800;'>&#39;/mylogo.png&#39;</span><span style='color: #0000FF;'>,</span><br/>&#160;&#160;&#160;&#160;<span style='color: #008800;'>&#39;link&#39;</span>&#160;&#160;&#160;<span style='color: #0000FF;'>=</span><span style='color: #0000FF;'>&#62;</span>&#160;<span style='color: #990000;'><b>$mysite</b></span>&#160;<span style='color: #0000FF;'>.</span>&#160;<span style='color: #008800;'>&#39;/&#39;</span><span style='color: #0000FF;'>,</span><br/>&#160;&#160;&#160;&#160;<span style='color: #008800;'>&#39;width&#39;</span>&#160;&#160;<span style='color: #0000FF;'>=</span><span style='color: #0000FF;'>&#62;</span>&#160;<span style='color: #008800;'>&#39;150&#39;</span><span style='color: #0000FF;'>,</span><br/>&#160;&#160;&#160;&#160;<span style='color: #008800;'>&#39;height&#39;</span>&#160;<span style='color: #0000FF;'>=</span><span style='color: #0000FF;'>&#62;</span>&#160;<span style='color: #008800;'>&#39;70&#39;</span><br/>&#160;&#160;<span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/>&#160;&#160;<span style='color: #990000;'><b>$sql</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: #008800;'>&#34;SELECT&#160;*&#160;FROM&#160;blog_entries&#160;ORDER&#160;BY&#160;date&#160;DESC&#160;LIMIT&#160;10&#34;</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;<span style='color: #990000;'><b>$res</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: #990000;'><b>$db</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>Query<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$sql</b></span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/>&#160;&#160;<span style='color: #000099;'><b>if</b></span>&#160;<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$res</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>NumRows<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>)</span>&#160;<span style='color: #0000FF;'>&#62;</span>&#160;<span style='color: purple;'>0</span><span style='color: #0000FF;'>)</span>&#160;<span style='color: #0000FF;'>{</span><br/>&#160;&#160;&#160;&#160;<span style='color: #000099;'><b>while</b></span>&#160;<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$row</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: #990000;'><b>$res</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>Fetch<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>)</span>&#160;<span style='color: #0000FF;'>{</span><br/>&#160;&#160;&#160;&#160;&#160;&#160;<span style='color: #990000;'><b>$item</b></span>&#160;<span style='color: #0000FF;'>=</span>&#160;<span style='color: #000099;'><b>new</b></span>&#160;RSSItem<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;&#160;&#160;&#160;&#160;<span style='color: #990000;'><b>$item</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>SetTitle<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$row</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>title<span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;&#160;&#160;&#160;&#160;<span style='color: #990000;'><b>$item</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>SetLink<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$mysite</b></span>&#160;<span style='color: #0000FF;'>.</span>&#160;<span style='color: #008800;'>&#39;/entries/&#39;</span>&#160;<span style='color: #0000FF;'>.</span>&#160;<span style='color: #990000;'><b>$row</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>id<span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;&#160;&#160;&#160;&#160;<span style='color: #0099CC;'>//&#160;The&#160;date&#160;will&#160;automatically&#160;be&#160;transformed&#160;into&#160;a</span><br/>&#160;&#160;&#160;&#160;&#160;&#160;<span style='color: #0099CC;'>//&#160;RFC2822-date&#160;which&#160;&#160;all&#160;RSS&#160;dates&#160;should&#160;be&#160;formatted&#160;as</span><br/>&#160;&#160;&#160;&#160;&#160;&#160;<span style='color: #990000;'><b>$item</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>SetDate<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$row</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span><span style='color: #ff0000;'>date</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;&#160;&#160;&#160;&#160;<span style='color: #990000;'><b>$item</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>SetDescription<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$row</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>excerpt<span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;<br/>&#160;&#160;&#160;&#160;&#160;&#160;<span style='color: #0099CC;'>//&#160;Add&#160;the&#160;item&#160;to&#160;the&#160;channel</span><br/>&#160;&#160;&#160;&#160;&#160;&#160;<span style='color: #990000;'><b>$channel</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>AddItem<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$item</b></span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/>&#160;&#160;&#160;&#160;<span style='color: #0000FF;'>}</span><br/>&#160;&#160;<span style='color: #0000FF;'>}</span><br/>&#160;<br/>&#160;<br/>&#160;&#160;<span style='color: #0099CC;'>//&#160;If&#160;the&#160;second&#160;argument&#160;is&#160;&#34;true&#34;&#160;an&#160;text/xml&#160;header&#160;will&#160;be&#160;output&#160;-&#160;if</span><br/>&#160;&#160;<span style='color: #0099CC;'>//&#160;no&#160;headers&#160;alerady&#160;has&#160;been&#160;output&#160;-&#160;and&#160;the&#160;RSS&#160;feed&#160;will&#160;be&#160;echoed&#160;out.</span><br/>&#160;&#160;<span style='color: #990000;'><b>$feed</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>Render<span style='color: #0000FF;'>(</span><span style='color: #990000;'><b>$channel</b></span><span style='color: #0000FF;'>,</span>&#160;<span style='color: #000099;'><b>true</b></span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/><span style='color: #0000FF;'>}</span><br/><span style='color: #000099;'><b>catch</b></span>&#160;<span style='color: #0000FF;'>(</span>Exception&#160;<span style='color: #990000;'><b>$e</b></span><span style='color: #0000FF;'>)</span>&#160;<span style='color: #0000FF;'>{</span><br/>&#160;&#160;<span style='color: #000099;'><b>die</b></span><span style='color: #0000FF;'>(</span><span style='color: #008800;'>&#34;Error:&#160;&#34;</span>&#160;<span style='color: #0000FF;'>.</span>&#160;<span style='color: #990000;'><b>$e</b></span><span style='color: #0000FF;'>-</span><span style='color: #0000FF;'>&#62;</span>getMessage<span style='color: #0000FF;'>(</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>)</span><span style='color: #0000FF;'>;</span><br/><span style='color: #0000FF;'>}</span><br/><span style='color: #0000FF;'>?</span><span style='color: #0000FF;'>&#62;</span><br/>